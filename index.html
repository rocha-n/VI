<!doctype html>
<html lang="">

<head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="css/menu.css">
</head>

<body>

    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <div>
            <span onclick="firstLevel()">First Level</span>
            <div id="firstLevel" class="dropdown-content">
                <a href="#country" id="pays">Country</a>
                <a href="#nutriscore" id="nutriscore">Nutriscore</a>
                <a href="#brand" id="brand">Brand</a>
            </div>
        </div>
        <div>
            <span onclick="secondLevel()">Second Level</span>
            <div id="secondLevel" class="dropdown-content">
                <a href="#country">Country</a>
                <a href="#nutriscore">Nutriscore</a>
                <a href="#brand">Brand</a>
            </div>
        </div>
        <div>
            <span onclick="thirdLevel()">Third Level</span>
            <div id="thirdLevel" class="dropdown-content">
                <a href="#country">Country</a>
                <a href="#nutriscore">Nutriscore</a>
                <a href="#brand">Brand</a>
            </div>
        </div>
    </div>
    <!-- Use any element to open the sidenav -->
    <div id="attribution">
        <span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776; menu</span>
        <span class="attribution">Data used to generate the graph is provided by
            <a href="https://openfoodfacts.org">Open Food Facts</a>
        and is licensed under <a href="https://opendatacommons.org/licenses/odbl/1.0/">ODbL v1.0</a> </span>
    </div>


    <div id="viz"></div>

<script src="js/data.json"></script>
<script src="js/main.js"></script>
<script src="js/menu.js"></script>
<script src="js/vendor/d3.js"></script>
<script src="js/vendor/d3plus.full.js"></script>
<!--
<script src="https://d3plus.org/js/d3.js"></script>
<script src="https://d3plus.org/js/d3plus.js"></script>-->

<script>
    let props = ["pays", "marque"];
    list = filtreParNombreDeProduit(groupByAndCountNutrition(["pays", "marque"], data), 50);
    list = createLigneToHaveTheNutrition(props, list);
  //  list = filtrePourLesNutritiomAndComputPourcentage(props, "a", list);
    console.log(list);
    let visualization = d3plus.viz()
        .container("#viz")
        .data(list)
        .type("tree_map")
        .id(["pays", "nutrition","marque"])
        // .depth(3)
        .size("total")
        .draw();
</script>
</body>

</html>
