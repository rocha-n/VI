<!doctype html>
<html lang="">

<head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="css/menu.css">
</head>

<body>

<div class="sidenav" id="mySidenav">
    <div class="description">Choose map</div>
    <a class="closebtn" href="javascript:void(0)" onclick="closeNav()">&times;</a>
    <a href="#">Per Country</a>
    <a href="#">Per Brand</a>
    <a href="#">Per Nutriscore</a>
</div>
<!-- Use any element to open the sidenav -->
<div id="attribution">
    <span onclick="openNav()" style="font-size:30px;cursor:pointer">&#9776; menu</span>
    <span class="attribution">Data used to generate the graph is provided by
            <a href="https://openfoodfacts.org">Open Food Facts</a>
        and is licensed under <a href="https://opendatacommons.org/licenses/odbl/1.0/">ODbL v1.0</a> </span>
</div>


<div id="viz"></div>

<script src="js/data.json"></script>
<script src="js/main.js"></script>
<script src="js/menu.js"></script>
<script src="js/vendor/d3.js"></script>
<script src="js/vendor/d3plus.full.js"></script>
<!--
<script src="https://d3plus.org/js/d3.js"></script>
<script src="https://d3plus.org/js/d3plus.js"></script>-->

<script>
    let parPourcentageNutriscor = true;
    let forGroup = ["pays", "marque"];
    let list = filtreParNombreDeProduit(groupByAndCountNutrition(["pays", "marque"], data), 50);
    // list = createLigneToHaveTheNutrition(props, list);
    if (parPourcentageNutriscor) {
        forGroup = ["pays", "marque"]
        list = filtrePourLesNutritiomAndComputPourcentage(forGroup, "a", list);
    } else {
        forGroup = ["pays", "nutrition", "marque"]
    }
    let visualization = d3plus.viz()
        .container("#viz")
        .data(list)
        .type("tree_map")
        .id(forGroup)
        .height(window.innerHeight - 80)
        .title("Titles and Footers Example")
        //.type({"mode": "slice-dice"})
        .title({
            "sub": "Subtitles are smaller than titles.",
            "total": true
        })
        .mouse({
            "move": true,                        // key will also take custom function
            "click": function (data, instance) {
                console.log(data);
                instance.zoom(true);
            }
        })

        // .depth(3)
        .size("total")
        .draw();
</script>
</body>

</html>
